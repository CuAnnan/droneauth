<%- include('includes/header'); %>
<h2>Shows</h2>

<div class="container-sm">
    <% for(let show of shows){%>
        <div class="row show-row" id="show-row-<%- show.shortid %>" data-show-name="<%- show.showName%>" data-shortid="<%-show.shortid%>">
            <div class="col">
                <div class="row"><div class="col"><h3><%- show.showName%></h3></div></div>
                <% for(let stream of show.streams){%>
                    <div class="row show-stream"><div class="col"><%- stream.name%></div></div>
                <%}%>
            </div>
        </div>
    <%}%>
</div>

<h2>Add Show:</h2>

    <div class="form-group row">
        <label for="streamName" class="col-form-label col-sm-1">Show name:</label>
        <div class="col-sm-2">
            <input type="text" class="form-control" id="streamName" name="streamName"/>
        </div>
    </div>
    <div class="form-group row">
        <div class="col-sm-1">Add Stream</div>
        <div class="col-sm-2">
            <div class="dropdown show">
                <a class="btn btn-secondary dropdown-toggle" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    Streams
                </a>
                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <% for(let stream of streams) { %>
                        <a class="dropdown-item"><%- stream.name %></a>
                    <% } %>
                </div>
            </div>
        </div>
    </div>


<h2>Streams</h2>

<div class="container-sm">
    <% for(let stream of streams) { %>
        <div class="row" id="stream-row-<%- stream.shortid %>>" data-stream-name="<%- stream.name %>" data-shortid="<%- stream.shortid %>">
            <div class="col"><span class="rtmpLink">rtmp://<%- hostname %>:1935/live/<%- stream.name %>?user=<%- stream.owner.username %>&shortid=<%- stream.shortid %></span></div>
            <div class="col-1"><button class="btn btn-info btn-sm copy-rtmp-button">Copy</button></div>
            <div class="col-1"><button class="btn btn-danger btn-sm delete-rtmp-button">Delete</button></div>
        </div>
    <% }%>
</div>

<h2>Add stream:</h2>
<form method="post" action="/streams/" class="form-inline">
    <div class="form-group row">
        <label for="streamName" class="col-form-label col-sm-1">Stream name:</label>
        <div class="col-sm-2">
            <input type="text" class="form-control" id="streamName" name="streamName"/>
        </div>
        <div class="col-sm-1">
            <button type="submit" class="btn btn-primary mb-2">Add Stream</button>
        </div>
    </div>
</form>

<%- include('includes/footer'); %>